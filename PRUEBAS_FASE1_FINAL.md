# üéâ FASE 1 COMPLETADA - SISTEMA LISTO PARA PRUEBAS

## ‚úÖ ESTADO ACTUAL DEL SISTEMA

### üü¢ Servicios Activos:
```
‚úÖ Backend API       ‚Üí http://localhost:3001     [RUNNING]
‚úÖ Frontend Next.js  ‚Üí http://localhost:3003     [RUNNING]
‚úÖ MongoDB Atlas     ‚Üí Cluster0                  [CONNECTED]
‚úÖ Test Interactivo  ‚Üí http://localhost:8080/test-fase1.html
‚úÖ Monitor en vivo   ‚Üí http://localhost:8080/monitor.html
```

---

## üìã INSTRUCCIONES DE PRUEBA PASO A PASO

### üéÆ **M√âTODO 1: Test Interactivo (M√ÅS F√ÅCIL)**

**Ya tienes abierto:** http://localhost:8080/test-fase1.html

#### Sigue estos 6 pasos en orden:

**PASO 1: üîê Iniciar Sesi√≥n**
- Click en el bot√≥n "üîê Ir a Login"
- Se abrir√° http://localhost:3003/login
- Inicia sesi√≥n con Google o email
- Vuelve a la pesta√±a del test

**PASO 2: üëë Hacerte Administrador**
- Click en "üëë Hacerme Admin"
- Ver√°s un mensaje: ‚úÖ Usuario promovido a administrador
- Click en "üîç Verificar si soy Admin" para confirmar

**PASO 3: üìù Crear Proyecto de Prueba**
- Click en "üöÄ Crear Proyecto Auto"
- El sistema crear√° autom√°ticamente un proyecto con:
  - ‚úÖ 3 fotos de ejemplo
  - ‚úÖ Historia y pitch
  - ‚úÖ Redes sociales
  - ‚úÖ Estado: `pending_review`
- Ver√°s el ID del proyecto en la respuesta

**PASO 4: üìã Ver Proyectos Pendientes**
- Click en "üìã Ver Proyectos Pendientes"
- Ver√°s tu proyecto esperando aprobaci√≥n
- El ID se copiar√° autom√°ticamente al campo

**PASO 5: ‚úÖ Aprobar el Proyecto**
- Click en "‚úÖ Aprobar Proyecto"
- El proyecto cambiar√° de `pending_review` a `active`
- Ver√°s confirmaci√≥n de aprobaci√≥n

**PASO 6: üé® Ver Proyecto con Multimedia**
- Click en "üé® Ver Proyecto"
- Se abrir√° la p√°gina del proyecto
- Ver√°s:
  - ‚úÖ Galer√≠a de 3 fotos
  - ‚úÖ Historia completa
  - ‚úÖ Pitch
  - ‚úÖ Enlaces a redes sociales

---

### üíª **M√âTODO 2: Consola del Navegador (ALTERNATIVO)**

Si prefieres usar c√≥digo, abre la consola (F12) en http://localhost:3003 y ejecuta:

```javascript
// 1. Hacerte admin
fetch('http://localhost:3001/api/admin/promote', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ secret: 'crezco-admin-ultra-secreto-2024' }),
  credentials: 'include'
}).then(r => r.json()).then(console.log);

// 2. Crear proyecto
fetch('http://localhost:3001/api/projects', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    title: 'Mi Proyecto Test',
    description: 'Descripci√≥n del proyecto',
    goalAmount: 5000,
    category: 'tecnologia',
    storytelling: {
      photos: [
        'https://picsum.photos/800/600?random=1',
        'https://picsum.photos/800/600?random=2'
      ],
      videos: [],
      audios: [],
      story: 'Esta es la historia completa...',
      pitch: 'Un pitch atractivo'
    },
    socialMedia: {
      instagram: 'https://instagram.com/test',
      youtube: 'https://youtube.com/@test'
    }
  }),
  credentials: 'include'
}).then(r => r.json()).then(data => {
  console.log('Proyecto creado:', data);
  window.PROJECT_ID = data._id; // Guardar ID
});

// 3. Ver proyectos pendientes
fetch('http://localhost:3001/api/projects/pending', {
  credentials: 'include'
}).then(r => r.json()).then(console.log);

// 4. Aprobar proyecto (reemplaza PROJECT_ID)
fetch(`http://localhost:3001/api/projects/${window.PROJECT_ID}/approve`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ notes: 'Aprobado desde consola' }),
  credentials: 'include'
}).then(r => r.json()).then(console.log);

// 5. Abrir proyecto
window.open(`http://localhost:3003/projects/${window.PROJECT_ID}`, '_blank');
```

---

### üìú **M√âTODO 3: Script de Terminal (PARA PROMOVER ADMIN)**

```powershell
cd backend

# Ver usuarios en la base de datos
node promote-admin.js

# Promover tu usuario a admin (reemplaza con tu Clerk ID)
node promote-admin.js user_TU_CLERK_ID_AQUI
```

**¬øD√≥nde encontrar tu Clerk User ID?**
1. Ve a https://dashboard.clerk.com
2. Users ‚Üí Tu usuario
3. Copia el "User ID" (empieza con `user_`)

---

## üîç **MONITOREO EN TIEMPO REAL**

Abre el monitor para ver el estado de todos los servicios:

üî¥ **http://localhost:8080/monitor.html**

El monitor te mostrar√° cada 5 segundos:
- ‚úÖ Estado del backend
- ‚úÖ Estado del frontend
- ‚úÖ Conexi√≥n a MongoDB
- ‚úÖ Endpoints de admin funcionando
- ‚úÖ API de proyectos
- ‚úÖ Estado de autenticaci√≥n

Si algo falla, aparecer√° en rojo ‚ùå con detalles del error.

---

## üéØ **FLUJO COMPLETO ESPERADO**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. Login con Clerk     ‚îÇ
‚îÇ     (Google/Email)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2. Promover a Admin    ‚îÇ
‚îÇ     Role: supporter     ‚îÇ
‚îÇ          ‚Üì              ‚îÇ
‚îÇ     Role: admin         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  3. Crear Proyecto      ‚îÇ
‚îÇ  ‚Ä¢ T√≠tulo, descripci√≥n  ‚îÇ
‚îÇ  ‚Ä¢ Photos, videos       ‚îÇ
‚îÇ  ‚Ä¢ Historia, pitch      ‚îÇ
‚îÇ  ‚Ä¢ Redes sociales       ‚îÇ
‚îÇ                         ‚îÇ
‚îÇ  Status: pending_review ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  4. Listar Pendientes   ‚îÇ
‚îÇ  GET /projects/pending  ‚îÇ
‚îÇ  (Solo admin puede ver) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  5. Aprobar Proyecto    ‚îÇ
‚îÇ  POST /:id/approve      ‚îÇ
‚îÇ                         ‚îÇ
‚îÇ  Status: active ‚úÖ      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  6. Ver en Frontend     ‚îÇ
‚îÇ  ‚Ä¢ Galer√≠a de fotos     ‚îÇ
‚îÇ  ‚Ä¢ Videos/audios        ‚îÇ
‚îÇ  ‚Ä¢ Historia completa    ‚îÇ
‚îÇ  ‚Ä¢ Links redes sociales ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä **ENDPOINTS DISPONIBLES**

### P√∫blicos (sin auth):
```
GET  /api/projects          - Listar proyectos activos
GET  /api/projects/:id      - Ver un proyecto
GET  /health               - Health check del backend
```

### Requieren autenticaci√≥n:
```
POST /api/projects          - Crear proyecto (‚Üí pending_review)
PUT  /api/projects/:id      - Actualizar proyecto
GET  /api/admin/check       - Verificar si eres admin
POST /api/admin/promote     - Promover a admin (con secret)
```

### Solo Admin:
```
GET  /api/projects/pending         - Proyectos pendientes
POST /api/projects/:id/approve     - Aprobar proyecto
POST /api/projects/:id/reject      - Rechazar proyecto
```

---

## üêõ **SOLUCI√ìN DE PROBLEMAS**

### ‚ùå "No puedo crear proyectos"
**Soluci√≥n:**
1. Aseg√∫rate de estar logueado en http://localhost:3003/login
2. Abre consola (F12) y verifica que no haya errores
3. Verifica que el backend est√© corriendo en puerto 3001

### ‚ùå "No puedo aprobar proyectos (403 Forbidden)"
**Soluci√≥n:**
1. Ejecuta: `fetch('http://localhost:3001/api/admin/check', {credentials: 'include'}).then(r=>r.json()).then(console.log)`
2. Si `isAdmin: false`, ejecuta el paso 2 de promoci√≥n
3. Si `isAdmin: true` pero sigue fallando, reinicia el backend

### ‚ùå "Las im√°genes no se cargan"
**Soluci√≥n:**
- Usa URLs p√∫blicas completas (https://...)
- Ejemplo v√°lido: `https://picsum.photos/800/600?random=1`
- No uses rutas locales o relativas

### ‚ùå "Frontend en puerto diferente (3003)"
**Explicaci√≥n:**
- Normal, los puertos 3000, 3001, 3002 estaban ocupados
- Usa siempre http://localhost:3003 para el frontend

---

## ‚úÖ **CHECKLIST DE PRUEBA**

Marca cada paso conforme lo completes:

- [ ] ‚úÖ Backend respondiendo (GET /health)
- [ ] ‚úÖ Frontend cargando (puerto 3003)
- [ ] ‚úÖ MongoDB conectado (visible en logs backend)
- [ ] ‚úÖ Login exitoso con Clerk
- [ ] ‚úÖ Usuario promovido a admin
- [ ] ‚úÖ Proyecto creado con storytelling
- [ ] ‚úÖ Proyecto visible en lista de pendientes
- [ ] ‚úÖ Proyecto aprobado por admin
- [ ] ‚úÖ Multimedia visible en p√°gina de detalle
- [ ] ‚úÖ Enlaces de redes sociales funcionando

---

## üéì **DATOS DE EJEMPLO PARA PRUEBAS**

Si creas un proyecto manualmente, usa estos datos:

```json
{
  "title": "EcoTech - Tecnolog√≠a Sostenible",
  "description": "Desarrollamos soluciones tecnol√≥gicas para un futuro sostenible",
  "goalAmount": 15000,
  "category": "tecnologia",
  "storytelling": {
    "photos": [
      "https://picsum.photos/800/600?random=10",
      "https://picsum.photos/800/600?random=11",
      "https://picsum.photos/800/600?random=12"
    ],
    "videos": [],
    "audios": [],
    "story": "Nuestro proyecto naci√≥ de la necesidad de combinar tecnolog√≠a con sostenibilidad. Despu√©s de a√±os investigando, hemos desarrollado una plataforma que permite...",
    "pitch": "√önete a la revoluci√≥n verde. Tecnolog√≠a que cuida el planeta."
  },
  "socialMedia": {
    "instagram": "https://instagram.com/ecotech",
    "tiktok": "https://tiktok.com/@ecotech",
    "youtube": "https://youtube.com/@ecotech",
    "website": "https://ecotech.example.com",
    "linkedin": "https://linkedin.com/company/ecotech",
    "twitter": "https://twitter.com/ecotech"
  }
}
```

---

## üöÄ **PR√ìXIMOS PASOS (DESPU√âS DE PROBAR)**

Una vez completes todas las pruebas:

### Prioridad 3: Panel de Administrador UI
Crearemos una p√°gina bonita en `/admin/pending-projects` con:
- ‚úÖ Lista visual de proyectos pendientes
- ‚úÖ Botones para aprobar/rechazar con un click
- ‚úÖ Preview de multimedia antes de aprobar

### Prioridad 4: Mejorar UX del Formulario
- ‚úÖ Drag & drop para subir im√°genes
- ‚úÖ Preview de fotos/videos antes de enviar
- ‚úÖ Validaciones visuales en tiempo real
- ‚úÖ Dise√±o m√°s profesional con Tailwind

---

## üìû **¬øNECESITAS AYUDA?**

Si encuentras alg√∫n error:
1. Revisa el **monitor en tiempo real** (http://localhost:8080/monitor.html)
2. Revisa los **logs del backend** (terminal con nodemon)
3. Revisa la **consola del navegador** (F12)
4. Consulta **FASE1_COMO_PROBAR.md** para detalles adicionales

---

## üéâ **¬°FELICIDADES!**

Has completado la implementaci√≥n de **FASE 1 - Story Telling Multimedia**

El sistema ahora permite:
- ‚úÖ Crear proyectos con multimedia rica
- ‚úÖ Proceso de aprobaci√≥n por administradores
- ‚úÖ Vista de proyectos con galer√≠a y redes sociales
- ‚úÖ Sistema de roles (creator/supporter/admin)

**¬°Ahora prueba el flujo completo!** üöÄ
